<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>🎁 حمایت از میلاد کاتاکوری</title>
<link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;600&display=swap" rel="stylesheet">
<style>
body {
  margin:0;
  font-family:'Vazirmatn',sans-serif;
  background:#000;
  color:#00ff99;
  text-align:center;
  direction:rtl;
  overflow-x:hidden;
}
h1 {
  margin:50px 0 30px;
  font-size:2.4em;
  text-shadow:0 0 15px #00ff99;
}
.button-container, .form-container {
  display:flex;
  justify-content:center;
  gap:25px;
  flex-wrap:wrap;
  margin-bottom:50px;
}
.btn {
  display:inline-block;
  padding:16px 32px;
  font-size:1.2em;
  color:#00ff99;
  text-decoration:none;
  border:2px solid #00ff99;
  border-radius:12px;
  box-shadow:0 0 15px #00ff99;
  transition:all 0.3s ease;
  cursor:pointer;
}
.btn:hover {
  background:#00ff99;
  color:#000;
  box-shadow:0 0 30px #00ff99;
  transform:scale(1.05);
}
input, select, textarea {
  padding:10px 12px;
  border-radius:8px;
  border:1px solid #00ff99;
  background:#000;
  color:#00ff99;
  margin:5px;
  width:220px;
  font-size:1em;
}
label {
  display:block;
  margin-top:10px;
  font-weight:600;
}
#clock {
  position:fixed;
  top:20px;
  right:20px;
  font-size:1.2em;
  color:#00ff99;
}
#overlay {
  position:fixed;
  inset:0;
  pointer-events:none;
}
#donation-alert {
  position:absolute;
  top:40%;
  left:50%;
  transform:translate(-50%,-50%);
  text-align:center;
  background:rgba(0,0,0,0.9);
  border:2px solid #00ff99;
  border-radius:20px;
  padding:30px 40px;
  display:none;
  z-index:10;
  animation:fadein 0.5s ease;
}
#donation-video {
  width:200px;
  height:200px;
  border-radius:12px;
  margin-bottom:15px;
}
#donor-text {
  font-size:1.4em;
  text-shadow:0 0 15px #00ff99;
}
#stats {
  position:fixed;
  bottom:8%;
  left:50%;
  transform:translateX(-50%);
  font-size:1.3em;
  background:rgba(0,0,0,0.85);
  border-radius:14px;
  padding:20px 30px;
  color:#00ff99;
  text-shadow:0 0 12px #00ff99;
  line-height:1.8;
  z-index:5;
}
@keyframes fadein {from{opacity:0;}to{opacity:1;}}
@media(max-width:500px){
  .btn{padding:12px 20px;font-size:1em;}
  h1{font-size:2em;margin:40px 0;}
  #donation-video{width:140px;height:140px;}
  #stats{padding:15px 20px;font-size:1.1em;}
}
</style>
</head>
<body>

<h1>🎁 حمایت از میلاد کاتاکوری</h1>

<!-- فرم حمایت -->
<div class="form-container">
  <div>
    <label>نام (اجباری)</label>
    <input type="text" id="donorName" required>
    <label>ایمیل (اختیاری)</label>
    <input type="email" id="donorEmail">
    <label>شماره تماس (اختیاری)</label>
    <input type="text" id="donorPhone">
    <label>مبلغ حمایت (تومان)</label>
    <input type="number" id="donationAmount" required>
    <label>پیام حامی (اختیاری)</label>
    <textarea id="donorMessage" rows="2"></textarea>
    <button class="btn" onclick="startDonation()">💳 حمایت</button>
  </div>
</div>

<!-- دکمه رسمی NowPayments -->
<div class="button-container">
  <a class="btn" href="https://nowpayments.io/donation?api_key=MP94SK3-2RNMDJ4-PPKQWSS-GHCVMNJ" target="_blank" rel="noreferrer noopener">
    <img src="https://nowpayments.io/images/embeds/donation-button-black.svg" alt="Crypto donation button">
  </a>
</div>

<!-- Overlay نمایش حمایت -->
<div id="overlay">
  <div id="donation-alert">
    <video id="donation-video" src="donate.mp4" autoplay muted></video>
    <p id="donor-text"></p>
  </div>
  <div id="stats">
    <p>💰 جمع کل: <span id="total">0</span> USDT</p>
    <p>🎯 درصد هدف: <span id="percent">0</span>%</p>
  </div>
</div>

<!-- ساعت زنده -->
<div id="clock"></div>

<script>
const alertBox = document.getElementById('donation-alert');
const donorText = document.getElementById('donor-text');
const videoEl = document.getElementById('donation-video');
const totalEl = document.getElementById('total');
const percentEl = document.getElementById('percent');
let total = 0, target = 100; // هدف به USDT

// ساعت زنده
function updateClock(){
  const now = new Date();
  let h = ('0'+now.getHours()).slice(-2);
  let m = ('0'+now.getMinutes()).slice(-2);
  let s = ('0'+now.getSeconds()).slice(-2);
  document.getElementById('clock').textContent = h+':'+m+':'+s;
}
setInterval(updateClock, 1000);
updateClock();

// تابع شروع حمایت
function startDonation(){
  const name = document.getElementById('donorName').value || 'حامی ناشناس';
  const amountIRR = parseFloat(document.getElementById('donationAmount').value) || 0;
  const message = document.getElementById('donorMessage').value || '';
  
  if(!amountIRR){ alert('لطفاً مبلغ حمایت را وارد کنید'); return; }

  // تبدیل ریال به USDT با نرخ ثابت 1USDT ~ 45000 تومان (مثال)
  const usdtRate = 45000;
  const amountUSDT = (amountIRR / usdtRate).toFixed(2);

  // آپدیت جمع کل و درصد هدف
  total += parseFloat(amountUSDT);
  totalEl.textContent = total.toFixed(2);
  percentEl.textContent = Math.min(((total/target)*100).toFixed(1),100);

  // نمایش ویدیو و متن
  donorText.textContent = `${name} | ${amountUSDT} USDT${message?(' | '+message):''}`;
  alertBox.style.display='block';
  videoEl.currentTime=0;
  videoEl.play();
  setTimeout(()=>{alertBox.style.display='none';}, amountUSDT*0); // فقط یکبار پخش
}
</script>
</body>
</html>
