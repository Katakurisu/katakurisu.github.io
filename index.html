<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ Ø­Ù…Ø§ÛŒØª Ø§Ø² Ù…ÛŒÙ„Ø§Ø¯ Ú©Ø§ØªØ§Ú©ÙˆØ±ÛŒ</title>
<link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;600&display=swap" rel="stylesheet">
<style>
body {
  margin:0;
  font-family:'Vazirmatn',sans-serif;
  background:#000;
  color:#00ff99;
  text-align:center;
  direction:rtl;
  overflow-x:hidden;
}
h1 {
  margin:50px 0 30px;
  font-size:2.2em;
  text-shadow:0 0 12px #00ff99;
}
.form-container {
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:20px;
  margin-bottom:40px;
}
input, textarea {
  padding:12px 15px;
  font-size:1.1em;
  border:1px solid #00ff99;
  border-radius:10px;
  width:250px;
  background:#111;
  color:#00ff99;
}
textarea {resize:none;height:80px;}
#donation-button {
  display:inline-block;
  border:none;
  border-radius:8px;
  padding:12px 20px;
  cursor:pointer;
  transition:all 0.3s ease;
}
#donation-button img {
  vertical-align:middle;
}
#donation-button:hover {opacity:0.85;}
#converted {margin-top:-10px;font-size:1em;color:#00ff99;text-shadow:0 0 8px #00ff99;}
#overlay {
  position:fixed;
  inset:0;
  pointer-events:none;
}
#donation-alert {
  position:absolute;
  top:40%;
  left:50%;
  transform:translate(-50%,-50%);
  text-align:center;
  background:rgba(0,0,0,0.9);
  border:1px solid #00ff99;
  border-radius:20px;
  padding:25px 35px;
  display:none;
  z-index:10;
  animation:fadein 0.5s ease;
}
#donation-video {
  width:200px;
  height:200px;
  border-radius:12px;
  margin-bottom:15px;
}
#donor-text {
  font-size:1.3em;
  text-shadow:0 0 12px #00ff99;
}
#stats {
  position:fixed;
  bottom:6%;
  left:50%;
  transform:translateX(-50%);
  font-size:1.2em;
  background:rgba(0,0,0,0.85);
  border-radius:14px;
  padding:18px 25px;
  color:#00ff99;
  text-shadow:0 0 10px #00ff99;
  line-height:1.7;
  z-index:5;
}
@keyframes fadein {from{opacity:0;}to{opacity:1;}}
@media(max-width:500px){
  input,textarea{width:200px;font-size:1em;}
  h1{font-size:2em;margin:40px 0;}
  #donation-video{width:140px;height:140px;}
  #stats{padding:12px 18px;font-size:1.05em;}
}
</style>
</head>
<body>

<h1>ğŸ Ø­Ù…Ø§ÛŒØª Ø§Ø² Ù…ÛŒÙ„Ø§Ø¯ Ú©Ø§ØªØ§Ú©ÙˆØ±ÛŒ</h1>

<div class="form-container">
  <input type="text" id="name" placeholder="Ù†Ø§Ù… (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)">
  <input type="text" id="phone" placeholder="Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)">
  <textarea id="message" placeholder="Ù¾ÛŒØ§Ù…/Ù†Ø¸Ø± (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)"></textarea>
  <input type="number" id="amount-toman" placeholder="Ù…Ø¨Ù„Øº (ØªÙˆÙ…Ø§Ù†)" min="1000">
  <div id="converted"></div>
  <button id="donation-button">
    <a href="https://nowpayments.io/donation?api_key=MP94SK3-2RNMDJ4-PPKQWSS-GHCVMNJ" target="_blank" rel="noreferrer noopener">
      <img src="https://nowpayments.io/images/embeds/donation-button-white.svg" alt="Donate">
    </a>
  </button>
</div>

<div id="overlay">
  <div id="donation-alert">
    <video id="donation-video" src="donate.mp4" autoplay muted></video>
    <p id="donor-text"></p>
  </div>
  <div id="stats">
    <p>ğŸ’° Ø¬Ù…Ø¹ Ú©Ù„: <span id="total">0</span> USDT</p>
    <p>ğŸ¯ Ø¯Ø±ØµØ¯ Ù‡Ø¯Ù: <span id="percent">0</span>%</p>
  </div>
</div>

<script>
const alertBox = document.getElementById('donation-alert');
const donorText = document.getElementById('donor-text');
const videoEl = document.getElementById('donation-video');
const totalEl = document.getElementById('total');
const percentEl = document.getElementById('percent');
const amountInput = document.getElementById('amount-toman');
const convertedDiv = document.getElementById('converted');
let total = 0, target = 1000; // Ù‡Ø¯Ù Ø¨Ø± Ø­Ø³Ø¨ USDT

// Ù†Ø±Ø® ØªØ¨Ø¯ÛŒÙ„ Ø¢Ù†Ù„Ø§ÛŒÙ† ØªÙˆÙ…Ø§Ù† â†’ USDT (1 USDT â‰ˆ Ù†Ø±Ø® Ø¯Ù„Ø§Ø±ÛŒ ØªÙˆÙ…Ø§Ù†)
let lastRate = 45500; // Ù…Ù‚Ø¯Ø§Ø± Ù¾ÛŒØ´â€ŒÙØ±Ø¶

async function fetchRate(){
  try{
    const res = await fetch('https://api.nobitex.ir/market/tether/toman/ticker');
    const data = await res.json();
    if(data && data.last) lastRate = parseFloat(data.last);
  }catch(e){console.warn('Rate fetch failed:',e);}
}
setInterval(fetchRate,30000);
fetchRate();

amountInput.addEventListener('input',()=>{
  const t = parseFloat(amountInput.value);
  if(!isNaN(t) && t>0){
    const usdt = (t/lastRate).toFixed(2);
    convertedDiv.textContent = `${t.toLocaleString('fa-IR')} ØªÙˆÙ…Ø§Ù† â‰ˆ ${usdt} USDT`;
  } else convertedDiv.textContent = '';
});

// Ù†Ù…Ø§ÛŒØ´ Ø¢Ù„Ø§Ø±Ù… Ø­Ù…Ø§ÛŒØª
function showDonation(name, usdt, message=''){
  total += parseFloat(usdt);
  donorText.textContent = (name||'Ø­Ø§Ù…ÛŒ Ù†Ø§Ø´Ù†Ø§Ø³') + ' | ' + usdt + ' USDT' + (message?(' | '+message):'');
  totalEl.textContent = total.toFixed(2);
  percentEl.textContent = Math.min(((total/target)*100).toFixed(1),100);
  alertBox.style.display='block';
  videoEl.currentTime=0;
  videoEl.play();
  setTimeout(()=>{alertBox.style.display='none';},13000);
}

// Ù†Ù…ÙˆÙ†Ù‡ ØªØ³Øª
// showDonation('Ù…ÛŒÙ„Ø§Ø¯','14.64','ØªØ´Ú©Ø± ÙØ±Ø§ÙˆØ§Ù†');
</script>

</body>
</html>
