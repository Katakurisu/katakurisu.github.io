<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>🎯 هدف حمایت (OBS)</title>
<link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;600&display=swap" rel="stylesheet">
<style>
  body {
    margin:0;
    background: transparent; /* شفافیت برای OBS */
    font-family: 'Vazirmatn', sans-serif;
    overflow: hidden;
  }

  /* -------------------- والد برای وسط و بزرگ کردن -------------------- */
  #goal-wrapper {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(2); /* بزرگ شدن 2 برابر */
    transform-origin: center center;
    z-index: 10;
  }

  /* -------------------- کانتینر هدف -------------------- */
  #goal-container {
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  /* -------------------- عنوان هدف -------------------- */
  #goal-title {
    font-size: 2em;
    font-weight: 600;
    color: red;
    text-shadow: 0 0 8px red;
    margin-bottom: 10px;
    display: flex;
    align-items: center;
    gap: 10px;
  }

  #goal-title img {
    width: 40px;
    height: 40px;
  }

  /* -------------------- نوار هدف -------------------- */
  #goal-bar-wrapper {
    width: 400px;
    height: 40px;
    background: transparent;
    border: 4px solid yellow; /* دور نوار زرد */
    border-radius: 20px;
    padding: 2px;
    box-sizing: border-box;
    display: flex;
    align-items: center;
  }

  #goal-bar {
    height: 100%;
    width: 0%;
    background-color: #00ff99; /* سبز فسفری */
    border-radius: 16px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 10px;
    box-sizing: border-box;
    color: black;
    font-weight: bold;
    text-shadow: 0 0 5px #fff;
    font-size: 1em;
  }

  /* -------------------- متن درصد -------------------- */
  #goal-percent {
    font-weight: bold;
    color: black;
  }
</style>
</head>
<body>

<div id="goal-wrapper">
  <div id="goal-container">
    <div id="goal-title">
      هدف: خرید وبکم
      <img src="https://i.postimg.cc/3wXgFsh5/gift.png" alt="هدیه">
    </div>
    <div id="goal-bar-wrapper">
      <div id="goal-bar">
        <span id="goal-percent">0%</span>
        <span id="goal-amount">0 از 600000 تومان</span>
      </div>
    </div>
  </div>
</div>

<script>
  // -------------------- متغیرها --------------------
  let total = 0;
  const target = 600000; // مبلغ هدف به تومان
  const goalBar = document.getElementById('goal-bar');
  const percentText = document.getElementById('goal-percent');
  const amountText = document.getElementById('goal-amount');

  // -------------------- تست آپدیت هدف --------------------
  // این تابع برای تست در مرورگره، در OBS واقعی با وبهوک جایگزین میشه
  function addDonation(amount) {
    total += amount;
    if(total > target) total = target;
    const percent = Math.floor((total / target) * 100);
    percentText.textContent = percent + '%';
    amountText.textContent = total.toLocaleString('fa-IR') + ' از ' + target.toLocaleString('fa-IR') + ' تومان';
    goalBar.style.width = percent + '%';
  }

  // -------------------- تست اولیه --------------------
  setInterval(() => {
    const randomDonation = Math.floor(Math.random() * 50000); // تست
    addDonation(randomDonation);
  }, 5000);
</script>

</body>
</html>
