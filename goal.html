<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>🎯 نوار هدف حمایت</title>
<style>
body {margin:0; font-family:sans-serif; background:#000; color:#00ff99;}
#goal-container {width:90%; max-width:800px; margin:50px auto;}
#goal-bar {width:100%; background:#222; border-radius:20px; overflow:hidden;}
#progress {height:40px; width:0%; background:#00ff99; border-radius:20px;}
#stats {margin-top:10px; text-align:center;}
</style>
</head>
<body>

<div id="goal-container">
  <div id="goal-bar"><div id="progress"></div></div>
  <div id="stats">
    <p>💰 جمع کل: <span id="total">0</span> USDT</p>
    <p>🎯 درصد هدف: <span id="percent">0</span>%</p>
  </div>
</div>

<script>
const totalEl = document.getElementById('total');
const percentEl = document.getElementById('percent');
const progressEl = document.getElementById('progress');
let total = 0, target = 100;

async function fetchGoal(){
  try{
    const res = await fetch('https://katakurisu.github.io/donations.json',{cache:'no-store'});
    const data = await res.json();
    total = data.reduce((sum,d)=>sum + parseFloat(d.usdt_amount),0);
    totalEl.textContent = total.toFixed(2);
    let percent = Math.min((total/target)*100,100);
    percentEl.textContent = percent.toFixed(2);
    progressEl.style.width = percent+'%';
  }catch(e){console.warn(e);}
}
setInterval(fetchGoal,5000);
fetchGoal();
</script>
</body>
</html>
